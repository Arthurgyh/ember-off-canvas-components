<!DOCTYPE html>
<html>
  <head>
    <title>Ember Off Canvas UI Components</title>
    <link rel="stylesheet" href="styles/main.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>

  <script type="text/x-handlebars" id="application">
    {{#eoc-viewport}}
      {{#on-canvas}}
        {{#off-canvas-opener useToggle=true}}
          <i class="fa fa-bars"></i>
        {{/off-canvas-opener}}
        <br>
        <div class="on-canvas-body">
          {{outlet}}
        </div>
      {{/on-canvas}}

      {{#off-canvas}}
        {{#off-canvas-closer}}
          <i class="fa fa-times"></i>
        {{/off-canvas-closer}}
        <br>
        <div class="off-canvas-body">
          {{outlet off-canvas}}
        </div>
      {{/off-canvas}}
    {{/eoc-viewport}}
  </script>

  <script type="text/x-handlebars" id="index">
    <p>
      {{#off-canvas-opener inline=true}}
        Open Off-Canvas Panel
      {{/off-canvas-opener}}
    </p>
    <h1>Components Included:</h1>
    <p>
      The application template this demo uses is a group of components:
      <code>eoc-viewport</code>, <code>on-canvas</code>, <code>off-canvas</code>,
      <code>off-canvas-opener</code> and <code>off-canvas-closer</code>.
    </p>
    <dl>
      <dt>eoc-viewport</dt>
      <dd>
        Container for the group of components, listens to custom events. When
        <code>active=true</code> the <code>eoc-viewport</code> element uses the CSS class
        <code>off-canvas-expanded</code>. Child elements have default CSS to transition the
        <code>off-canvas</code> from the right into view, pushing the <code>on-canvas</code>
        element over to the left.
      </dd>
      <dt>on-canvas</dt>
      <dd>
        Main area that is intended to be visible by default (on screen)
      </dd>
      <dt>off-canvas</dt>
      <dd>
        Secondary area off-screen (not visible) by default
      </dd>
      <dt>off-canvas-opener</dt>
      <dd>
        Expands the <code>off-canvas</code> element (show), uses custom event
        <code>expandOffCanvas</code> and has option for using <code>toggleOffCanvas</code>,
        <code>useToggle=true</code>. Option <code>inline=true</code> uses a the CSS class 
        <code>off-canvas-opener-inline</code> instead of <code>off-canvas-opener-default</code>
      </dd>
      <dt>off-canvas-closer</dt>
      <dd>
        Collapses the <code>off-canvas</code> element (hide), uses custom event 
        <code>collapseOffCanvas</code>
      </dd>
    </dl>
    <a href="https://github.com/pixelhandler/ember-off-canvas-components">View Source Github</a>
  </script>

  <script type="text/x-handlebars" id="off-canvas">
    <h2>Off Canvas Contents:</h2>
    <p>Yeah this is not a pretty demo, it is about encapsultating simple behaviors for the 
    Off-Canvas user interface (UI design pattern) into Web Components.</p>
    <p>Each component in the group may fire custom events that communicate a specific
    command, while another component can listen, as the events bubble.</p>
    <p>Checkout the <a href="https://github.com/pixelhandler/ember-off-canvas-components/tree/master/tests">
    unit and acceptance tests</a> for more details.</p>
    <p>See the <a href="https://github.com/pixelhandler/ember-off-canvas-components/tree/master/examples">
    examples directory in the github repo</a> to view the source code for this demo.</p>
    <br>
    <p>Perhaps do some asynchronous stuff then close the panel...</p>
    <button {{action 'asyncStuff' 'eoc-viewport' 'collapseOffCanvas'}}>Async Close</button>
    <br><br>
    <a href="https://github.com/pixelhandler/ember-off-canvas-components">View Source Github</a>
  </script>

  <script src="../bower_components/jquery/dist/jquery.js"></script>
  <script src="../bower_components/handlebars/handlebars.js"></script>
  <script src="../bower_components/ember/ember.js"></script>
  <script src="../bower_components/ic-styled/main.js"></script>
  <script src="http://localhost:4200/globals/main.js"></script>
  <script src="http://localhost:35729/livereload.js"></script>

  <script>
    var App = Ember.Application.create();

    App.ApplicationController = Ember.ObjectController.extend({
      actions: {
        asyncStuff: function(elementName, eventName) {
          Ember.run.later(this, asycToggleOffCanvas, elementName, eventName, 1000);
        }
      }
    });

    var asycToggleOffCanvas = function (elName, evtName) {
      if (typeof elName == 'string' && typeof evtName == 'string') {
        Em.$(elName).trigger(evtName);
      }
    };

    App.IndexRoute = Ember.Route.extend({
      renderTemplate: function (controller, model) {
        this._super(controller, model);
        this.render('off-canvas', { outlet: 'off-canvas' });
      }
    });
  </script>
  </body>
</html>
